/**
 * TokitaDevEngine version {{generatorVersion}}
 * Generated by engine {{generatorClass}}
 * Generated on {{generateDate}}
 * Developed by sulaimanfahmi@gmail.com
 */

const statusCode = require('../helper/helper.status.code.js')

const response = require('express').response

response.request = {}

response.responseBody = {
    meta: {
        timestamp: '',
        x_request_id: '',
        response_code: '',
        response_message: ''
    },
    data: {}
}

response.setContext = function (request) {
    response.request = request
    return this
}

response.ok = function (data) {
    this.responseBody.meta.x_request_id = this.request.headers['x-request-id']
    this.responseBody.meta.timestamp = new Date()
    this.responseBody.meta.response_code = statusCode.SUCCESS.response_code
    this.responseBody.meta.response_message = statusCode.SUCCESS.response_message
    this.responseBody.data = data
    this.status(200)
    return this
}

response.errorResponse = function (err) {
    this.responseBody.meta.x_request_id = this.request.headers['x-request-id']
    this.responseBody.meta.timestamp = new Date()
    this.responseBody.meta.response_code = err.response_code
    this.responseBody.meta.response_message = err.response_message
    this.responseBody.data = null
    this.status(err.http_code)
    return this
}

response.build=function(){
    return this.send(this.responseBody)
}
module.exports = response
