/**
 * TokitaDevEngine version {{generatorVersion}}
 * Generated by engine {{generatorClass}}
 * Generated on {{generateDate}}
 * Developed by sulaimanfahmi@gmail.com
 */

const express = require('express')
const cookieParser = require('cookie-parser')
const appException=require('../exception/exception.app.js')
const app = express()

app.use(express.urlencoded({ extended: false }))
app.use(cookieParser())
app.use(express.json())

{{#apiInfo}}{{#apis}}
app.use(require('../controllers/{{classFilename}}'))
{{/apis}}{{/apiInfo}}

app.use(function (err, req, res, next) {
    console.log(err.log)
    if(err instanceof appException){
        return res.setContext(req).errorResponse(err).build()
    }
    return res.status(500).send({
        error: err.message
    })
})
module.exports = app

