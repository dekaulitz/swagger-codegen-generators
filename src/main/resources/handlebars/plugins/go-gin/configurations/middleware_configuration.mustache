package configurations

/**
* TokitaDevEngine version v1.0
* Generated by engine io.swagger.codegen.v3.generators.modules.plugins.golang.GolangGin
* Generated on 09/03/2020 23:26:35
* Developed by sulaimanfahmi@gmail.com
*/
import (
    "github.com/gin-contrib/cors"
    "github.com/gin-gonic/gin"
    "github.com/google/uuid"
)

/**
* TokitaDevEngine version v1.0
* Generated by engine io.swagger.codegen.v3.generators.modules.plugins.golang.GolangGin
* Generated on 09/03/2020 23:26:35
* Developed by sulaimanfahmi@gmail.com
*/

func CorsHandler(router *gin.Engine) gin.HandlerFunc {
    return cors.New(cors.Config{
        AllowMethods:    []string{"GET", "POST", "OPTIONS", "PUT"},
        AllowHeaders:    []string{"Origin", "Content-Length", "Content-Type", "User-Agent", "Referrer", "Host", "token", "Access-Control-Allow-*"},
        AllowAllOrigins: true,
    })
}

func RequestFilter() gin.HandlerFunc {
    return func(context *gin.Context) {
        if context.Request.Header.Get("X-Request-Id") == "" {
            requestId:=uuid.New().String()
            context.Request.Header.Set("X-Request-Id",requestId )
            context.Writer.Header().Set("X-Request-Id",requestId )
        }
        context.Next()
    }
}
